<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" dir="ltr" class="uk-height-1-1">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>flasktest</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css" />
	<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	</head>
<body>
<section class="section">
<div class="container">
    <div class="columns is-centered is-mobile">	
        <div class="column is-dark notification is-four-fifths">
            <div class="is-size-7 has-text-warning" id="progress">
                <h1 class="title">flasktest</h1>
			    <h2 class="subtitle">Progress example</h2>
                <ul id="progress_list">
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="container">
	<div class="columns is-centered is-mobile">	
		<div class="column is-dark notification is-four-fifths">
			<div class="is-size-7 has-text-warning" id="display">
				<ul id="display_list">
				</ul>
			</div>
		</div>
	</div>
</div>
</section>


    <script type="text/javascript">
        var displayList  = document.getElementById("display_list");
        
        e1 = new EventSource('/events/channel-1');
        e1.onmessage = function(event) {
            var li = document.createElement("li");
            li.innerHTML = event.data;
            displayList.appendChild(li);
            var items = document.querySelectorAll("#display_list li");
            if (items.length > 3) {
                displayList.removeChild(items[0]);
            }
        };

        var progressList  = document.getElementById("progress_list");
        

        e2 = new EventSource('/events/channel-2');
        e2.onmessage = function(event) {
            var li = document.createElement("li");
            li.innerHTML = event.data;
            progressList.appendChild(li);
            var items = document.querySelectorAll("#progress_list li");
            if (items.length > 1) {
                progressList.removeChild(items[0]);
            }
 

        };
    </script>
</body>
</html>
